!function(angular){var app=this.app=angular.module("questFyApp",["ngRoute","ngStorage","ngTouch","ui.bootstrap","ngSwipeHandler"]);app.run(["$location","$rootScope","$route",function($location,$rootScope,$route){$rootScope.$on("$routeChangeSuccess",function(){$rootScope.title=$route.current.$$route.title})}]),app.controller("MainController",function($scope,Config,$route,$routeParams,$location,$swipe,SwipeInstance){$scope.$route=$route,$scope.$routeParams=$routeParams,$scope.$location=$location,$scope.config=Config,$scope.menu=[],angular.forEach($route.routes,function(route,link){route.menu&&$scope.menu.push({title:route.title,link:link})}),$scope.aside={open:!1,openAside:function(open){$scope.aside.open=angular.isUndefined(open)?!$scope.aside.open:open}},$scope.pedrinho=new SwipeInstance,console.log($scope.pedrinho),$scope.aloha=new SwipeInstance({priority:100,move:function(){console.log("MOVEU")}})}),app.factory("Config",function(){var Config=function(){var url="http://localhost/klaus/quest-fy/",root="app/",img="assets/img/",js="assets/js/",css="assets/css/",components="components/";this.img=url+img,this.js=url+js,this.css=url+css,this.components=root+components,this.baseUrl=function(route){return url+"#"+route}};return new Config})}(window.angular),function(){var components="app/components/";app.config(function($routeProvider,$locationProvider){$routeProvider.otherwise({redirectTo:"/"}).when("/",{templateUrl:components+"todo/todoView.html",controller:"TodoController",title:"My Tasks",menu:!0}).when("/outro-teste",{templateUrl:components+"teste/testeView.html",controller:"TodoController",title:"Oh shit this is awesome",menu:!0}),$locationProvider.html5Mode(!1)})}(window.angular),function(){app.controller("TesteController",function($scope,Config,$route){$scope.name="TesteController",$scope.config=Config,$scope.$route=$route})}(window.angular),function(){app.controller("TodoController",function($scope,Config,Task,$localStorage,$modal,$route,$routeParams,$filter,$swipe,SwipeInstance){$scope.name="TodoController",$scope.config=Config,$scope.taskFct=Task,$scope.newList="",$scope.$watch("newList.title",function(){$scope.newList.title=$filter("capitalize")($scope.newList.title)}),$scope.$storage=$localStorage.$default({lists:[],rewards:[],order:[]}),$scope.open=function(task){$modal.open({templateUrl:Config.baseUrl("app/components/shared/modal/taskModalView.html"),controller:"TaskModalController",resolve:{task:function(){return task}}})},$scope.lists=$scope.$storage.lists,$scope.rewards=$scope.$storage.rewards,$scope.toogleChecked=function(list,task){var taskIndex=(listIndex=$scope.lists.indexOf(list),$scope.lists[listIndex].tasks.indexOf(task));$scope.lists[listIndex].tasks[taskIndex].done=!$scope.lists[listIndex].tasks[taskIndex].done},$scope.addList=function(list){$scope.lists.push({title:list.title,tasks:[],newTask:{}}),$scope.$storage.lists=$scope.$storage.lists?$scope.$storage.lists:$scope.lists},$scope.deleteAllLists=function(){delete $scope.$storage.lists,$scope.lists=[]},$scope.addTask=function(list,task){if(task.name){var index=$scope.lists.indexOf(list);task.done=task.done||!1,$scope.lists[index].tasks.push({name:task.name,done:task.done,options:!1,status:0})}},$scope.alohinha=new SwipeInstance({priority:101,move:function(){console.log("MOVEU2")}})}),app.controller("TaskModalController",function($scope,$modalInstance,task){console.log(task),$scope.task=task})}(window.angular),function(angular){app.directive("taskList",function(){return{restrict:"E",templateUrl:"app/components/todo/taskListView.html"}}),app.directive("task",function(){return{restrict:"E",templateUrl:"app/components/todo/taskView.html"}}),app.directive("taskPreview",function(){return{restrict:"E",templateUrl:"app/components/todo/taskPreviewView.html"}}),app.factory("Task",function($localStorage){return{showTask:function(task){return alert(task.name),!0},cloneTask:function(list,task){var clonedTask=angular.copy(task);return clonedTask.options=!1,clonedTask.status=0,clonedTask.done=!1,list.tasks.push(clonedTask),!0},toogleOption:function(list,task){return angular.forEach(list.tasks,function(tasks,index){index!=list.tasks.indexOf(task)&&(tasks.options=!1)}),angular.isUndefined(task)?void 0:(task.options=!task.options,!0)},deleteTask:function(list,task){var indexes=this.getIndexes(list,task);return $localStorage.lists[indexes.list].tasks.splice([indexes.task],1),!0},getIndexes:function(list,task){return{list:$localStorage.lists.indexOf(list),task:list.tasks.indexOf(task)}},updateTask:function(list,task){var indexes=this.getIndexes(list,task);return list.tasks[indexes.task]=task,!0},getStatus:function(task){var statusLimit=5,status=task.status;if(status){var statusClass="status-",statusAbs=Math.abs(status);return statusClass+=status>0?"positive-":"negative-",statusClass+=statusAbs>statusLimit?statusLimit:statusAbs}return!1},setStatus:function(list,task,status){return task.status+=status,this.updateTask(list,task),!0},isDone:function(task){return task.done},setDone:function(list,task,done){return task.done=done,task.updateTask(list,task),!0}}}),app.factory("TaskClass",function($localStorage){return function(list,newTask){var statusLimit=5,list=list,task={name:"task name",done:!1,options:!1,status:0,type:"task"};angular.extend(task,newTask),this.getName=function(){return task.name},this.setName=function(name){return"undefined"!=typeof name?name.length<25?(task.name=name,this.updateTask(),!0):"The task's name should be lower than 25 characters.":"The task's name is undefined."},this.isDone=function(){return task.done},this.setDone=function(done){return"undefined"!=typeof done?(task.done=done,this.updateTask(),!0):"The task's done status is undefined."},this.toogleDone=function(){this.setDone(!task.done)},this.getStatus=function(){if(task.status){var statusClass="status-",statusAbs=Math.abs(task.status);return statusClass+=task.status>0?"positive-":"negative-",statusClass+=statusAbs>statusLimit?statusLimit:statusAbs}return!1},this.getIndexes=function(){return{list:$localStorage.lists.indexOf(list),task:list.tasks.indexOf(this)}},this.updateTask=function(){var indexes=this.getIndexes();$localStorage.lists[indexes.list].tasks[indexes.task]=task}}}),app.filter("taskStatus",function(){var statusLimit=5;return function(status){if(status){var statusClass="status-",statusAbs=Math.abs(status);return statusClass+=status>0?"positive-":"negative-",statusClass+=statusAbs>statusLimit?statusLimit:statusAbs}return!1}})}(window.angular);